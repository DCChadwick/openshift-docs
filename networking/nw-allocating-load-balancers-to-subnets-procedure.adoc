// Module included in the following assemblies:
//
// *networking/allocating-load-balancers.adoc

:_mod-docs-content-type: PROCEDURE
[id="nw-allocating-load-balancers-to-subnets-procedure_{context}"]
= Allocate API and Ingress Load Balancers to Specific Subnets

Perform the following steps to allocate API and Ingress load balancers to specific subnets.

.Prerequisites

. Log in as a cluster administrator.
. Ensure that your cluster is deployed on a supported cloud platform, such as AWS. 
//Note to self: Is above prerequisite correct? Or can you only do this procedure on cluster deployed on AWS? The Jira didn't make that clear.
. Obtain the subnet ID.

.Procedure

. Prepare the IngressController YAML file. 

[source,yaml]
----
apiVersion: operator.openshift.io/v1
kind: IngressController
Metadata:
name: example-ingress
namespace: openshift-ingress-operator
Spec:
endpointPublishingStrategy:
 		type: LoadBalancerService
 		loadBalancer:
scope: External
subnet: "<your-subnet-id>"  # Specify the target subnet for the load balancer <1>
----
<1> Add the `subnet` field under the load balancer configuration in your YAML file. Replace `<your-subnet-id>` with the actual subnet identifier.

. Use the OpenShift CLI to apply the YAML file:

[source,terminal]
----
oc apply -f your-ingresscontroller.yaml
----

. Verify Subnet allocation.  
.. List the services in the ingress namespace.

[source,terminal]
----
oc get svc -n openshift-ingress
----

.. Confirm that the annotations show the service that you specified.

[source,terminal]
----
oc describe svc <service-name> -n openshift-ingress
----

. Check your cloud providerâ€™s console or CLI tools to ensure the frontend IP is allocated from the specified subnet.

[NOTE]
====
You might need to update your firewall rules or routing policies to allow traffic to the newly assigned subnet.
====